<div class="row">
    <div class="col-lg-8 pt-5">
        <div class="row">
            <div class="col-12 mb-3">
                <div class="topcontact">
                    <div class="inner p-4">
                        <p class="fs-32 text-white ff-p">Incident</p>
                        <p class="fs-16 text-white ff-p mb-4">Manage and update Incident cases directly.</p>
                        <!-- <button class="btn btn-clear import mr-2" data-toggle="modal" data-target=".import-modal"><img
                                src="assets/images/cloud_download.svg" alt="" class="mr-2"><span
                                class="text-white">Import</span></button> -->
                        <button class="btn btn-out-white" data-toggle="modal" data-target=".new-modal"><img
                                src="assets/images/add.svg" alt="" class="mr-2">Add New Incident</button>
                    </div>
                </div>
            </div>
            <div class="col-12 mb-3">
                <ul class="nav nav-tabs leads align-items-center" id="myTab" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" id="home-tab" data-toggle="tab" href="#all" role="tab"
                            aria-controls="home" aria-selected="true">All Incidents</a>
                    </li>

                    <li class="ml-auto">
                        <div class="dropdown">
                            <a class="filter text-right" id="filter">
                                <img src="assets/images/date filter.svg" alt="">
                            </a>

                            <div class="dropdown-menu dropdown-menu-right filter-drop">
                                <div class="top px-3 py-3">
                                    <div class="d-flex align-items-center">
                                        <div class="mr-3">
                                            <img src="assets/images/filter.svg" alt="">
                                        </div>
                                        <div>
                                            <p class="m-0 fw-7 fs-18 ff-p fc-green">Filter your Leads</p>
                                            <p class="m-0 fs-12 ff-s fc-black">Choose your preferred metrics to display
                                                leads</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="px-4 py-3">
                                    <p class="mb-3 fs-14 ff-s fw-6 fc-blue">ANALYTICS</p>
                                    <div class="form-group form-check mb-3">
                                        <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                        <label class="form-check-label ff-s fs-14" for="exampleCheck1">Name</label>
                                    </div>
                                    <div class="form-group form-check mb-3">
                                        <input type="checkbox" class="form-check-input" id="exampleCheck2">
                                        <label class="form-check-label ff-s fs-14" for="exampleCheck2">Phone
                                            Number</label>
                                    </div>
                                    <div class="form-group form-check mb-3">
                                        <input type="checkbox" class="form-check-input" id="exampleCheck3">
                                        <label class="form-check-label ff-s fs-14" for="exampleCheck3">Email</label>
                                    </div>
                                    <div class="form-group form-check mb-3">
                                        <input type="checkbox" class="form-check-input" id="exampleCheck4">
                                        <label class="form-check-label ff-s fs-14" for="exampleCheck4">Institution
                                            Type</label>
                                    </div>

                                    <div class="form-group form-check mb-3">
                                        <input type="checkbox" class="form-check-input" id="exampleCheck5">
                                        <label class="form-check-label ff-s fs-14" for="exampleCheck5">Last Activity
                                            Time</label>
                                    </div>
                                    <div class="form-group form-check mb-3">
                                        <input type="checkbox" class="form-check-input" id="exampleCheck6">
                                        <label class="form-check-label ff-s fs-14" for="exampleCheck6">Est. Annual
                                            Income</label>
                                    </div>
                                    <div class="form-group form-check mb-3">
                                        <input type="checkbox" class="form-check-input" id="exampleCheck7">
                                        <label class="form-check-label ff-s fs-14" for="exampleCheck7">Email
                                            Status</label>
                                    </div>
                                    <div class="form-group form-check mb-3">
                                        <input type="checkbox" class="form-check-input" id="exampleCheck8">
                                        <label class="form-check-label ff-s fs-14" for="exampleCheck8">Lead
                                            Source</label>
                                    </div>
                                    <div class="form-group form-check mb-3">
                                        <input type="checkbox" class="form-check-input" id="exampleCheck9">
                                        <label class="form-check-label ff-s fs-14" for="exampleCheck9">Lead
                                            Status</label>
                                    </div>
                                    <div class="form-group form-check mb-3">
                                        <input type="checkbox" class="form-check-input" id="exampleCheck10">
                                        <label class="form-check-label ff-s fs-14" for="exampleCheck10">Lead
                                            Owner</label>
                                    </div>
                                    <div class="form-group form-check mb-3">
                                        <input type="checkbox" class="form-check-input" id="exampleCheck11">
                                        <label class="form-check-label ff-s fs-14" for="exampleCheck11">Date
                                            Created</label>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="col-12">
                <div class="row">
                    <div class="col-12">
                        <div class="table-responsive">
                            <table class="table dashboard">
                                <thead>
                                    <th>
                                        <input type="checkbox">
                                    </th>
                                    <th>ACCOUNT</th>
                                    <th>PRODUCT</th>
                                    <th>TYPE/STATUS</th>
                                    <th>DATE CREATED
                                        <a class="more text-right float-right" id="more">
                                            <img src="assets/images/more-table.svg" alt="">
                                        </a>


                                        <div class="dropdown-menu dropdown-menu-right more-drop">
                                            <div class="top px-4 py-3">
                                                <p class="m-0 fw-7 fs-14 ff-p fc-green">MORE FIELDS</p>
                                                <p class="m-0 fs-10 ff-s fc-black">You can only select 3 fields
                                                </p>
                                            </div>
                                            <div class="px-4 py-3">

                                                <div class="form-group form-check mb-3">
                                                    <input type="checkbox" class="form-check-input" id="exampleCheck6">
                                                    <label class="form-check-label ff-s fs-14"
                                                        for="exampleCheck6">Website</label>
                                                </div>
                                                <div class="form-group form-check mb-3">
                                                    <input type="checkbox" class="form-check-input" id="exampleCheck7">
                                                    <label class="form-check-label ff-s fs-14"
                                                        for="exampleCheck7">Institution Type</label>
                                                </div>
                                                <div class="form-group form-check mb-3">
                                                    <input type="checkbox" class="form-check-input" id="exampleCheck8">
                                                    <label class="form-check-label ff-s fs-14" for="exampleCheck8">Deal
                                                        Status</label>
                                                </div>
                                                <div class="form-group form-check mb-3">
                                                    <input type="checkbox" class="form-check-input" id="exampleCheck9">
                                                    <label class="form-check-label ff-s fs-14" for="exampleCheck9">Date
                                                        Converted</label>
                                                </div>

                                                <div class="form-group form-check mb-3">
                                                    <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                                    <label class="form-check-label ff-s fs-14"
                                                        for="exampleCheck1">Account Owner</label>
                                                </div>
                                                <div class="form-group form-check mb-3">
                                                    <input type="checkbox" class="form-check-input" id="exampleCheck2">
                                                    <label class="form-check-label ff-s fs-14"
                                                        for="exampleCheck2">Number of Products</label>
                                                </div>
                                                <div class="form-group form-check mb-3">
                                                    <input type="checkbox" class="form-check-input" id="exampleCheck3">
                                                    <label class="form-check-label ff-s fs-14"
                                                        for="exampleCheck3">Transaction Volume</label>
                                                </div>
                                                <div class="form-group form-check mb-3">
                                                    <input type="checkbox" class="form-check-input" id="exampleCheck4">
                                                    <label class="form-check-label ff-s fs-14" for="exampleCheck4">Est.
                                                        Transaction Value</label>
                                                </div>

                                            </div>

                                        </div>
                                    </th>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let thrincident of incidents" (click)="getIncident(thrincident.id)">
                                        <td>
                                            <div class="pt-2"><input type="checkbox"></div>
                                        </td>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <div class="mr-2">
                                                    <div class="image" *ngIf="thrincident.imageString">
                                                        <img [src]="'data:image/png;base64, ' + thrincident.imageString | trustedUrl" alt="">
                                                    </div>
                                                    <div class="image" *ngIf="thrincident.imageString == null">
                                                        <img src="assets/images/companyalt.svg" alt="">
                                                    </div>
                                                </div>
                                                <div>
                                                    <p class="m-0 ff-s fs-15 fw-6 fc-black">{{thrincident.accountName.substring(0, 10)}}</p>

                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <p class="ff-s fs-15 fw-6 fc-black m-0 pt-2">{{thrincident.productName.substring(0, 10)}}</p>
                                        </td>
                                        <td>
                                            <p class="ff-s fs-15 fw-4 fw-6 fc-black m-0 mb-1">
                                                {{thrincident.caseType}}
                                            </p>
                                            <p class="ff-s fs-15 fc-lightblack m-0">{{thrincident.status}}</p>
                                        </td>
                                        <td>
                                            <p class="ff-s fs-15 fw-4 fw-6 fc-darkblue m-0 mb-1">
                                                {{thrincident?.reporter.firstName}} {{thrincident?.reporter.lastName}}
                                            </p>
                                            <p class="ff-s fs-15 fc-black m-0">{{thrincident.dateCreated | date: 'mediumDate'}}</p>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div> 
    </div>
    <div class="col-lg-4">
        <div class="sidediv">
            <div class="p-3">
                <div class="d-flex mb-2">
                    <div class="mr-2">
                        <img src="assets/images/info.svg" alt="">
                    </div>
                    <div>
                        <p class="m-0 fs-16 fc-green ff-p">Info</p>
                    </div>
                </div>
                <div class="orangeline"></div>
                <div class="emptystate" *ngIf="!isSelected">
                    <img src="assets/images/emptylead.svg" alt="">
                </div>

                <!-- properties -->
                <div class="props pt-2" *ngIf="isSelected">
                    <div class="top-prop px-2 py-1">
                        <div class="d-flex align-items-center">
                            <div class="py-2">
                                <div class="image" *ngIf="incident?.imageString">
                                    <img [src]="'data:image/png;base64, ' + incident?.imageString | trustedUrl" alt="">
                                </div>
                                <div class="image" *ngIf="incident?.imageString == null">
                                    <img src="assets/images/companyalt.svg" alt="">
                                </div>
                            </div>
                            <div class="p-2">
                                <p class="m-0 ff-s fw-6 fs-15 fc-black">{{incident?.accountName}}</p>
                            </div>
                        </div>

                    </div>

                    <div class="row py-2">
                        <div class="col-5 mb-3">
                            <p class="m-0 fc-lightblack fs-14 ff-s">Product:</p>
                        </div>
                        <div class="col-7 mb-3">
                            <p class="m-0 fc-black fw-6 fs-14 ff-s">{{incident?.productName}}</p>
                        </div>
                        <div class="col-5 mb-3">
                            <p class="m-0 fc-lightblack fs-14 ff-s">Status:</p>
                        </div>
                        <div class="col-7 mb-3">
                            <p class="m-0 fc-black fw-6 fs-14 ff-s">{{incident?.status}}</p>
                        </div>
                        <div class="col-5 mb-3">
                            <p class="m-0 fc-lightblack fs-14 ff-s">Source:</p>
                        </div>
                        <div class="col-7 mb-3">
                            <p class="m-0 fc-black fw-6 fs-14 ff-s">{{incident?.source}}</p>
                        </div>
                        <div class="col-5 mb-3">
                            <p class="m-0 fc-lightblack fs-14 ff-s">Date Created:</p>
                        </div>
                        <div class="col-7 mb-3">
                            <p class="m-0 fc-black fw-6 fs-14 ff-s">{{incident?.dateCreated | date: 'medium'}}</p>
                        </div>
                    </div>
                    <div class="info mb-3">
                        <div class="top-prop b-5 p-2">
                            <p class="m-0 fw-4 ff-s fc-black fs-15"><span class="mr-2"><img
                                        src="assets/images/incident.svg" alt=""></span>Incident Description</p>
                        </div>
                        <div class="row pl-2">
                            <div class="col-12 mb-3" >
                                <p class="m-0 fs-13 ff-s fc-lightblack fw-4">{{incident?.description}}</p>
                            </div>
                            <div class="col-12 mb-3">
                                <p class="mb-1 fs-12 ff-s fw-6 fc-lightgrey">Reported by:</p>
                                <div class="d-flex align-items-center justify-content-between p-2">
                                    <div>
                                        <div class="prop-initials">
                                            {{incident?.reporter.firstName.substring(0,1)}}
                                        </div>
                                    </div>
                                    <div>
                                        <p class="m-0 fs-15 ff-s fc-black fw-6">{{incident?.reporter.firstName}} {{incident?.reporter.lastName}}</p>
                                    </div>
                                    <div>
                                        <a href="tel:{{incident?.reporter.phoneNumber}}">
                                            <img src="assets/images/bcall.svg" alt="">
                                        </a>
                                    </div>
                                    <div>
                                        <a>
                                            <img src="assets/images/bmessage.svg" alt="">
                                        </a>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                    
                    <div class="d-flex justify-content-center mt-4">
                        <button class="btn btn-green mr-3" (click)="openIncident(incident.id)">View Complete Info</button>
                        <button class="btn btn-more"><img src="assets/images/more-green.svg" alt=""></button>
                    </div>
                </div>
                <!-- properties -->
            </div>
        </div>
    </div>
</div>


<div class="modal fade bd-example-modal-lg new-modal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-body px-lg-5 px-3 py-4">
                <div class="row">
                    <div class="col-12 mb-3">
                        <div class="d-flex justify-content-between">
                            <div>
                                <p class="fc-green ff-p fs-25 fw-6 m-0">
                                    Create An Incident
                                </p>
                                <p class="fs-16 ff-s fc-lightblack">Input Incident Information</p>
                            </div>
                            <div>
                                <a data-dismiss="modal"><img src="assets/images/close.svg" alt=""></a>
                            </div>
                        </div>
                        <div class="orangeline"></div>
                        <div class="deeporange"></div>
                    </div>
                    <div class="col-12 mb-3">
                        <ul class="nav nav-tabs prod" id="myTab" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab"
                                    aria-controls="home" aria-selected="true">
                                    <div class="d-flex align-items-center">
                                        <div class="number mr-2">1</div>
                                        <div>
                                            Information
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab"
                                    aria-controls="profile" aria-selected="false">
                                    <div class="d-flex align-items-center">
                                        <div class="number mr-2">2</div>
                                        <div>
                                            Files
                                        </div>
                                    </div>
                                </a>
                            </li>
                        </ul>
                    </div>

                    <div class="col-12">
                        <form class="tab-content" id="myTabContent" #newIncidentForm="ngForm" (submit)="createIncident(newIncidentForm)" ngNativeValidate>
                            <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                                <div class="row">
                                    <div class="col-lg-6 mb-3">
                                        <label class="fs-16 ff-p fc-black">Product Name</label>
                                        <select class="form-control botform" ngModel name="name">
                                            <option *ngFor="let product of products" value="{{product.id}}" >{{product.productName}}</option>
                                        </select>
                                    </div>
                                    <div class="col-lg-6 mb-3">
                                        <label class="fs-16 ff-p fc-black">Case Owner</label>
                                        <select class="form-control botform" ngModel name="owner">
                                            <option *ngFor="let user of users" value="{{user.id}}">{{user.fullName}}</option>
                                        </select>
                                    </div>



                                    <div class="col-lg-6 mb-3">
                                        <label class="fs-16 ff-p fc-black">Account</label>
                                        <select class="form-control botform" ngModel name="account">
                                            <option *ngFor="let user of accounts" value="{{user.id}}">{{user.accountName}}</option>
                                        </select>
                                    </div>
                                    <div class="col-lg-6 mb-3">
                                        <label class="fs-16 ff-p fc-black">Reported By</label>
                                        <select class="form-control botform" ngModel name="contact">
                                            <option *ngFor="let user of contacts" value="{{user.id}}">{{user.firstName}} {{user.lastName}}</option>
                                        </select>
                                    </div>
                                    <div class="col-lg-4 mb-3">
                                        <label class="fs-16 ff-p fc-black">Case Type</label>
                                        <select class="form-control botform" ngModel name="caseType">
                                            <option value="0">Others</option>
                                            <option value="1">Problem</option>
                                            <option value="2">Question</option>
                                            <option value="3">Feature Request</option>
                                            <option value="4">Information Request</option>
                                        </select>
                                    </div>
                                    <div class="col-lg-4 mb-3">
                                        <label class="fs-16 ff-p fc-black">Status</label>
                                        <select class="form-control botform" ngModel name="status">
                                            <option value="0">New</option>
                                            <option value="1">Open</option>
                                            <option value="2">Pending</option>
                                            <option value="3">Resolved</option>
                                            <option value="4">Closed</option>
                                        </select>
                                    </div>
                                    <div class="col-lg-4 mb-3">
                                        <label class="fs-16 ff-p fc-black">Source</label>
                                        <select class="form-control botform" ngModel name="source">
                                            <option value="Call">Call</option>
                                            <option value="Email">Email</option>
                                        </select>
                                    </div>
                                    <div class="col-lg-4 mb-3">
                                        <label class="fs-16 ff-p fc-black">Support Phase</label>
                                        <select class="form-control botform" ngModel name="phase">
                                            <option value="Contact Centre">Contact Centre</option>
                                            <option value="Operations">Operations</option>
                                            <option value="Technology Operations">Technology Operations</option>
                                            <option value="Development/Designs">Development/Designs</option>
                                        </select>
                                    </div>
                                    <div class="col-lg-4 mb-3">
                                        <label class="fs-16 ff-p fc-black">Priority</label>
                                        <select class="form-control botform" ngModel name="priority">
                                            <option value="0">Lowest</option>
                                            <option value="1">Low</option>
                                            <option value="2">Normal</option>
                                            <option value="3">High</option>
                                            <option value="4">Highest</option>
                                        </select>
                                    </div>
                                    <div class="col-lg-6 mb-3">
                                        <label for="" class="fs-16 fc-black ff-p">Case Title</label>
                                        <input type="text" class="form-control botform" ngModel name="title">
                                    </div>
                                    <div class="col-lg-6 mb-3">
                                        <label for="" class="fs-16 fc-black ff-p">Date Closed</label>
                                        <input type="date" class="form-control botform" ngModel name="closed">
                                    </div>
                                    <div class="col-lg-12 mb-3">
                                        <label for="" class="fs-16 fc-black ff-p">Case Description</label>
                                        <textarea name="" id="" cols="30" rows="10"
                                            class="form-control botform" ngModel name="description"></textarea>
                                    </div>
                                    <div class="col-12 mt-3">
                                        <p class="text-right ">
                                            <a class="btn btn-blue px-3">Next</a>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                                <div class="row">
                                    <div class="col-12 mb-3">
                                        <p class="m-0 fw-4 fs-15 ff-s">Upload your product documents</p>
                                    </div>
                                    <div class="col-12 mb-3">
                                        <div class="uploadfile" (click)="fileInput.click()" appDragDrop
                                            (onFileDropped)="uploadFile($event)">
                                            <img src="assets/images/cloud_download_black.svg" alt="">
                                            <p class="text-center fs-13 ff-s fw-4 mt-4">Drop files to upload or click
                                            </p>
                                            <p class="py-5 text-center">
                                                <button class="btn btn-blue px-3" (click)="fileInput.click()">Upload
                                                    Files</button>
                                            </p>
                                            <p class="text-center fs-14 ff-s fc-lightblack">
                                                You can import up to 5000 records through an
                                                .xls or .xlsx file. To import more
                                                than 5000 records at a time, use a .csv file.</p>
                                            <input hidden type="file" multiple #fileInput
                                                (change)="uploadFile($event.target.files)">

                                        </div>
                                    </div>
                                    <div class="col-12 mt-5 pt-5">
                                        <p class="text-right">
                                            <button class="btn btn-blue px-3" type="submit">Save</button>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>


<div class="modal fade bd-example-modal-lg import-modal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">

            <div class="modal-body px-lg-5 px-3 py-4">
                <div class="row">
                    <div class="col-12 mb-5">
                        <div class="d-flex justify-content-between">
                            <div>
                                <p class="fc-green ff-p fs-25 fw-6 m-0">
                                    Import New Quotes
                                </p>
                                <p class="fs-16 ff-s fc-lightblack">Upload Quote Information</p>
                            </div>
                            <div>
                                <a data-dismiss="modal"><img src="assets/images/close.svg" alt=""></a>
                            </div>
                        </div>
                        <div class="orangeline"></div>
                        <div class="deeporange"></div>
                    </div>
                    <div class="col-12 mb-3">
                        <p class="m-0 fw-4 fs-15 ff-s">Upload Files </p>
                    </div>
                    <div class="col-12 mb-3">
                        <div class="uploadfile" (click)="fileInput.click()" appDragDrop
                            (onFileDropped)="uploadFile($event)">
                            <img src="assets/images/cloud_download_black.svg" alt="">
                            <p class="text-center fs-13 ff-s fw-4 mt-4">Drop files to upload or click</p>
                            <p class="py-5 text-center">
                                <button class="btn btn-blue px-3" (click)="fileInput.click()">Upload Files</button>
                            </p>
                            <p class="text-center fs-14 ff-s fc-lightblack">
                                You can import up to 5000 records through an
                                .xls or .xlsx file. To import more
                                than 5000 records at a time, use a .csv file.</p>
                            <input hidden type="file" multiple #fileInput (change)="uploadFile($event.target.files)">

                        </div>
                    </div>
                    <div class="col-12 mt-5 pt-5">
                        <p class="text-right">
                            <button class="btn btn-blue px-3">Import</button>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>